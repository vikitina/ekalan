{% extends 'layout/admin.twig' %}


{% block content %}
<a href="/admin/materials">Материалы</a> / {{ material.name_material }}
<hr>
<div class="row">
     <div class="col-md-8">
                     <section class="material_open">
                            <div class="panel panel-default">
                                      <div class="panel-heading">
        
                                              <h4>Редактирование {{ material.name_material }}</h4>
                                              <a class="del_material" data-id="{{ material.id }}"><i class="fa fa-trash-o"></i></a>
                                       </div>
                                          <div class="panel-body">
                                          <form id="editmaterial">
                                               <input type="hidden" name="id" value="{{ material.id }}" />
                                               <input type="hidden" name="name_material" id="name_material" value="{{ material.name_material }}" />
                                               <input type="hidden" name="articul" id="articul" value="{{ material.articul }}" />
                                               <input type="hidden" name="price_material" id="price_material" value="{{ material.price_material }}" />
                                               <input type="hidden" name="exclude" id="exclude" value="0" />
                                          </form>
                                                  <ul class="text_data">
                                                     <li>
                                                         <span>Наименование</span>
                                                         <div class="editable">
                                                             <span>{{ material.name_material }}</span>
                                                             <div class="editblock">
                                                                  <div class="editarea">
                                                                       <input type="text" data-name="name_material" value="{{ material.name_material }}" />
                                                                  </div>
                                                                  

                                                            </div><!-- editblock  -->
                                                            <i class="fa fa-pencil fa-fw"></i>
                                                          </div>
                                                      </li>
                                                     <li><span>Артикул</span>
                                                          <div class="editable">
                                                              <span>{{ material.articul }}</span>
                                                              <div class="editblock">
                                                                  <div class="editarea">
                                                                       <input type="text" data-name="articul" value="{{ material.articul }}" />
                                                                  </div>
                                                                  

                                                              </div><!-- editblock  -->
                                                              <i class="fa fa-pencil fa-fw"></i>

                                                          </div>
                                                     </li>
                                                     <li class="separator"></li>

                                                     <li><span>Производитель</span>
                                                         <div>

                                                                            <select id="id_manufacturer_select">
                                                                                {% for manuf in lists.manufacturers %}
                                                                                        <option value="{{ manuf.id }}" data-name="id_manufacturer"{% if material.id_manufacturer==manuf.id %} selected=""{%endif%}>{{ manuf.name_manufacturer }}</option>
                                                                                 {% endfor %}

                                                                            </select>
                                                              
                                                          </div>
                                                      </li>
                                                    <li><span>Коллекция</span>
                                                         <div>

                                                                            <select id="id_collection_select">
                                                                                {% for collect in lists.collections %}
                                                                                        <option value="{{ collect.id }}" data-name="id_collection"{% if material.id_collection==collect.id %} selected=""{% endif %}>{{ collect.name_collection }}</option>
                                                                                 {% endfor %}

                                                                            </select>
                                                              
                                                          </div>
                                                      </li>                                                      
                                                     <li class="separator"></li>
                                                     <li><span>Цвет</span>
                                                          <div>
                                                                           <select>
                                                                                {% for color in lists.colors %}
                                                                                        <option data-value="{{ color.id }}" data-name="id_color"{% if material.id_color==color.id %} selected=""{%endif%}>{{ color.name_color }}</option>
                                                                                 {% endfor %}

                                                                            </select>                                                            
                                                          </div>
                                                       </li>
                                                     <li><span>Текстура</span>
                                                          <div>
                                                                           <select>
                                                                                {% for texture in lists.textures %}
                                                                                        <option data-value="{{ texture.id }}" data-name="id_texture"{% if material.id_texture==texture.id %} selected=""{%endif%}>{{ texture.name_texture }}</option>
                                                                                 {% endfor %}

                                                                            </select>                                                            
                                                          </div>                                                     
                                                     </li>
                                                     <li class="separator"></li>
                                                     <li><span>Цена</span>

                                                          <div class="editable">
                                                              <span>{{ material.price_material }}</span> 
                                                              <div class="editblock">
                                                                  <div class="editarea">
                                                                       <input type="text" data-name="price_material" value="{{ material.price_material }}" />
                                                                  </div>
                                                                  

                                                            </div><!-- editblock  -->
                                                            <i class="fa fa-pencil fa-fw"></i>
                                                          </div> 
                                                     </li>
                                                     <li class="separator"></li>
                                                     <li><span>Подобные</span>

                                                         <ul id="analogs_list"{% if not lists.analogs %} class="empty"{% endif %}>
                                                        
                                                                {% for item in lists.analogs %}
                                                                          <li data-id= "{{ item.id }}"> 
                                                                                 <div style="background-image:url('{{ item.url }}');">
                                                                                       <small>{{ item.articul }}</small><br />
                                                                                       <span>{{ item.name_material }} </span>  
                                                                                 </div>
                                                                                 
                                                                          
                                                                          
                                                                                 <input type="checkbox" value="{{ item.id }}" />   

                                                                          </li>
                                                                {% endfor %}
                                                         </ul>
                                                                <div id="material_list_open_window" class="local_link">Открыть список всех материалов</div>
                                                                <input type="hidden" name="analogs" id="form_analogs_list" value="{{ lists.str_analogs }}" />
                                                        </ul>
                                                  <div class="sample_data"> 
                                                  <span>Изображение</span>
                                                      <a href=# class="edit_sample"><em style="background-image:url('/assets/application/samples/{{material.url}}');"> </em></a>
                                                  </div>
                                                  
                                         </div>
                                 </div>   	



			        </section>
     </div>  

 <div class="modal fade" id="delete_confirm_window">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title">Подтверждение удаления материала</h4>
      </div>
      <div class="modal-body">
        Материал такой-то будет удален. Вы уверены?

        <input type="hidden" id="deleting_id" />
      </div>
        <div class="modal-footer">
                <a href="#" data-dismiss="modal" class="btn" id="btn_cancel_deleting">Отменить</a>
                <a href="/admin/delmaterial/{{ material.id }}" class="btn btn-primary" id="btn_confirm_deleting">Удалить</a>
        </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->    



 <div class="modal fade" id="material_list_modal">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title">Укажите материалы, подобные данному:</h4>
      </div>
      <div class="modal-body">
            <ul class="analog_list_window"><form id="form_analogs">
              

                  {% for material in lists.materials  %}
                      
                      <li data-id={{ material.id }}> 
                         <div style="background:url('{{ material.url }}') no-repeat top left;">
                                  <small>{{ material.articul }}</small><br />
                                  <span>
                                          {{ material.name_material }}
                                  </span>  
                        </div>
                        <input type="checkbox" value="{{ material.id }}" {% if lists.list_analog_for_check[material.id] %} checked="checked" {% endif %}/>   

                       </li>
                  {%endfor%}
            </form></ul>

      </div>
        <div class="modal-footer">
                <a href="#" data-dismiss="modal" class="btn">Отменить</a>
                <a href="#" class="btn btn-primary" id="btn_pick_analogs">Добавить</a>
        </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->
<!-- /.modal -->    
    <script>
       var hash_collections = new Object();
      hash_collections = {{ hash_collections | raw }};

     </script>
{% endblock content %}